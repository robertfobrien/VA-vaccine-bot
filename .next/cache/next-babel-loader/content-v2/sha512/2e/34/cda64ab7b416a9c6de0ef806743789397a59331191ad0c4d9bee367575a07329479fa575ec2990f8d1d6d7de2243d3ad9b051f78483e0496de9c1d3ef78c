{"ast":null,"code":"import next from \"next\";\n\nconst puppeteer = require(\"puppeteer\");\n\nconst ig = require('instagram-scraping');\n\nexport default ((req, res) => {\n  (async () => {\n    console.log('############################### LETS GET YOU A VACCINE! #########################################');\n    req.body.cvslink;\n    req.body.zipcode;\n    let browser = await puppeteer.launch({\n      headless: false,\n      args: ['--window-size=1920,1080']\n    }); //turn to FALSE to debug\n\n    let page = await browser.newPage();\n    await page.goto('https://www.cvs.com/vaccine/intake/store/covid-screener/covid-qns', {\n      waitUntil: 'networkidle2'\n    });\n    const elem1 = await page.$('#q7_2');\n    const elem2 = await page.$('#q8_2');\n    const elem3 = await page.$('#q9_2');\n    await clickOnElement(elem1, 400);\n    await clickOnElement(elem2, 400);\n    await clickOnElement(elem3, 400); //await browser.close();\n  })();\n\n  res.status(200).json({\n    info: 'scrape page',\n    name: req.body.name\n  });\n});","map":{"version":3,"sources":["/Users/robertobrien/Documents/projects/vaccine-signup/pages/api/scrapePage.js"],"names":["next","puppeteer","require","ig","req","res","console","log","body","cvslink","zipcode","browser","launch","headless","args","page","newPage","goto","waitUntil","elem1","$","elem2","elem3","clickOnElement","status","json","info","name"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;;AAEA,MAAMC,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAMC,EAAE,GAAGD,OAAO,CAAC,oBAAD,CAAlB;;AAEA,gBAAe,CAACE,GAAD,EAAMC,GAAN,KAAc;AAGzB,GAAC,YAAY;AAETC,IAAAA,OAAO,CAACC,GAAR,CAAY,mGAAZ;AAEAH,IAAAA,GAAG,CAACI,IAAJ,CAASC,OAAT;AACAL,IAAAA,GAAG,CAACI,IAAJ,CAASE,OAAT;AACA,QAAIC,OAAO,GAAG,MAAMV,SAAS,CAACW,MAAV,CAAiB;AAACC,MAAAA,QAAQ,EAAE,KAAX;AAAkBC,MAAAA,IAAI,EAAE,CAAC,yBAAD;AAAxB,KAAjB,CAApB,CANS,CAMmF;;AAC5F,QAAIC,IAAI,GAAG,MAAMJ,OAAO,CAACK,OAAR,EAAjB;AAEA,UAAMD,IAAI,CAACE,IAAL,CAAU,mEAAV,EAA+E;AAACC,MAAAA,SAAS,EAAE;AAAZ,KAA/E,CAAN;AAEA,UAAMC,KAAK,GAAG,MAAMJ,IAAI,CAACK,CAAL,CAAO,OAAP,CAApB;AACA,UAAMC,KAAK,GAAG,MAAMN,IAAI,CAACK,CAAL,CAAO,OAAP,CAApB;AACA,UAAME,KAAK,GAAG,MAAMP,IAAI,CAACK,CAAL,CAAO,OAAP,CAApB;AAEA,UAAMG,cAAc,CAACJ,KAAD,EAAQ,GAAR,CAApB;AACA,UAAMI,cAAc,CAACF,KAAD,EAAQ,GAAR,CAApB;AACA,UAAME,cAAc,CAACD,KAAD,EAAQ,GAAR,CAApB,CAjBS,CAqBT;AACC,GAtBL;;AAyBAjB,EAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,IAAI,EAAE,aAAR;AAAuBC,IAAAA,IAAI,EAAEvB,GAAG,CAACI,IAAJ,CAASmB;AAAtC,GAArB;AACD,CA7BH","sourcesContent":["import next from \"next\";\n\nconst puppeteer = require(\"puppeteer\");\nconst ig = require('instagram-scraping');\n\nexport default (req, res) => {\n\n\n    (async () => { \n\n        console.log('############################### LETS GET YOU A VACCINE! #########################################');\n\n        req.body.cvslink;\n        req.body.zipcode;\n        let browser = await puppeteer.launch({headless: false, args: ['--window-size=1920,1080']}); //turn to FALSE to debug\n        let page = await browser.newPage(); \n\n        await page.goto('https://www.cvs.com/vaccine/intake/store/covid-screener/covid-qns', {waitUntil: 'networkidle2'});\n            \n        const elem1 = await page.$('#q7_2');\n        const elem2 = await page.$('#q8_2');\n        const elem3 = await page.$('#q9_2');\n\n        await clickOnElement(elem1, 400);\n        await clickOnElement(elem2, 400);\n        await clickOnElement(elem3, 400);\n\n\n    \n        //await browser.close();\n        })();\n\n\n    res.status(200).json({ info: 'scrape page', name: req.body.name })\n  }\n  "]},"metadata":{},"sourceType":"module"}