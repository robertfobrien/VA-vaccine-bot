{"ast":null,"code":"import { Puppeteer } from \"puppeteer\";\nexport default ((req, res) => {\n  const ytlink = req.body.youtubelink;\n\n  const puppeteer = require(\"puppeteer\");\n\n  (async () => {\n    let browser = await puppeteer.launch({\n      headless: false\n    });\n    let page = await browser.newPage(); //goes to the youtube link (routed to about page)\n\n    const ytAboutLink = ytlink + '/about';\n    await page.goto(ytAboutLink, {\n      waitUntil: 'networkidle2'\n    });\n    let youtubeStats = await page.evaluate(() => {\n      console.log(document.querySelector('#channel-name').innerText);\n      var name = document.querySelector('#channel-name').innerText;\n      var description = document.querySelector('#description').innerText; //var rightColumn = document.querySelectorAll('#right-column > yt-formatted-string')[2].innerText;\n\n      var views = '100,000';\n      var subscribers = document.querySelector('#subscriber-count').innerText;\n      var type = 'youtube';\n      var url = ytlink;\n      return {\n        type,\n        url,\n        name,\n        description,\n        views,\n        subscribers\n      };\n    });\n    console.log(youtubeStats);\n    await browser.close();\n  })(); //res.status(200).json({ info: 'scrape page', name: req.body.name })\n\n});","map":{"version":3,"sources":["/Users/robertobrien/Documents/projects/ghost-scraper/pages/api/scrapePage.js"],"names":["Puppeteer","req","res","ytlink","body","youtubelink","puppeteer","require","browser","launch","headless","page","newPage","ytAboutLink","goto","waitUntil","youtubeStats","evaluate","console","log","document","querySelector","innerText","name","description","views","subscribers","type","url","close"],"mappings":"AAAA,SAASA,SAAT,QAA0B,WAA1B;AAEA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAc;AAEzB,QAAMC,MAAM,GAAGF,GAAG,CAACG,IAAJ,CAASC,WAAxB;;AAEA,QAAMC,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AAEA,GAAC,YAAY;AACT,QAAIC,OAAO,GAAG,MAAMF,SAAS,CAACG,MAAV,CAAiB;AAACC,MAAAA,QAAQ,EAAE;AAAX,KAAjB,CAApB;AACA,QAAIC,IAAI,GAAG,MAAMH,OAAO,CAACI,OAAR,EAAjB,CAFS,CAIb;;AACI,UAAMC,WAAW,GAAGV,MAAM,GAAG,QAA7B;AACA,UAAMQ,IAAI,CAACG,IAAL,CAAUD,WAAV,EAAuB;AAACE,MAAAA,SAAS,EAAE;AAAZ,KAAvB,CAAN;AAEA,QAAIC,YAAY,GAAG,MAAML,IAAI,CAACM,QAAL,CAAc,MAAM;AAEzCC,MAAAA,OAAO,CAACC,GAAR,CAAYC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,EAAwCC,SAApD;AAEA,UAAIC,IAAI,GAAGH,QAAQ,CAACC,aAAT,CAAuB,eAAvB,EAAwCC,SAAnD;AACA,UAAIE,WAAW,GAAGJ,QAAQ,CAACC,aAAT,CAAuB,cAAvB,EAAuCC,SAAzD,CALyC,CAMzC;;AACA,UAAIG,KAAK,GAAG,SAAZ;AACA,UAAIC,WAAW,GAAGN,QAAQ,CAACC,aAAT,CAAuB,mBAAvB,EAA4CC,SAA9D;AAGA,UAAIK,IAAI,GAAG,SAAX;AACA,UAAIC,GAAG,GAAGzB,MAAV;AAEA,aAAO;AACHwB,QAAAA,IADG;AAEHC,QAAAA,GAFG;AAGHL,QAAAA,IAHG;AAIHC,QAAAA,WAJG;AAKHC,QAAAA,KALG;AAMHC,QAAAA;AANG,OAAP;AAQH,KAtBwB,CAAzB;AAwBAR,IAAAA,OAAO,CAACC,GAAR,CAAYH,YAAZ;AAEJ,UAAMR,OAAO,CAACqB,KAAR,EAAN;AAEC,GApCD,IANyB,CA6CzB;;AACD,CA9CH","sourcesContent":["import { Puppeteer } from \"puppeteer\"\n\nexport default (req, res) => {\n\n    const ytlink = req.body.youtubelink;\n\n    const puppeteer = require(\"puppeteer\");\n\n    (async () => { \n        let browser = await puppeteer.launch({headless: false});\n        let page = await browser.newPage(); \n\n    //goes to the youtube link (routed to about page)\n        const ytAboutLink = ytlink + '/about';\n        await page.goto(ytAboutLink, {waitUntil: 'networkidle2'});\n        \n        let youtubeStats = await page.evaluate(() => {\n\n            console.log(document.querySelector('#channel-name').innerText);\n\n            var name = document.querySelector('#channel-name').innerText;\n            var description = document.querySelector('#description').innerText;\n            //var rightColumn = document.querySelectorAll('#right-column > yt-formatted-string')[2].innerText;\n            var views = '100,000';\n            var subscribers = document.querySelector('#subscriber-count').innerText;\n\n\n            var type = 'youtube';\n            var url = ytlink;\n\n            return {\n                type,\n                url,\n                name,\n                description,\n                views,\n                subscribers,\n            }\n        })\n\n        console.log(youtubeStats);\n\n    await browser.close();\n\n    })();\n\n\n    //res.status(200).json({ info: 'scrape page', name: req.body.name })\n  }\n  "]},"metadata":{},"sourceType":"module"}