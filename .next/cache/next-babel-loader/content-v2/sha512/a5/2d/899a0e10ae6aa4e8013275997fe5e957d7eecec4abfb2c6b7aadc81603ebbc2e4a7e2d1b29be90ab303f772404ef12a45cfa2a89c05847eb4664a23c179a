{"ast":null,"code":"import { Puppeteer } from \"puppeteer\"; // This is the script\n// based on req.body, call some api to get a webpage\n// scrap page\n// return json here\n\nexport default ((req, res) => {\n  const puppeteer = require(\"puppeteer\");\n\n  (async () => {\n    var browser = await puppeteer.launch({\n      headless: true\n    });\n    var page = await browser.newPage(); //gos to the facebook link\n\n    await page.goto(req.body.facebooklink, {\n      waitUntil: 'networkidle2'\n    });\n    let facebookStats = await page.evaluate(() => {\n      var fbType;\n      if (document.querySelector('button[class=\"_4jy0 _4jy3 _4jy2 _51sy selected _42ft\"]').innerText) fbType = 'page';else fbType = 'profile';\n      console.log(\"fb type: \" + fbType);\n      var followers = document.querySelector('span[class=\"d2edcug0 hpfvmrgz qv66sw1b c1et5uql oi732d6d ik7dh3pa fgxwclzu a8c37x1j keod5gw0 nxhoafnm aigsh9s9 d9wwppkn fe6kdd0r mau55g9w c8b282yb iv3no6db jq4qci2q a3bd9o3v knj5qynh oo9gr5id hzawbc8m\"]').innerText;\n      var name = document.querySelector('h1[class=\"gmql0nx0 l94mrbxd p1ri9a11 lzcic4wl bp9cbjyn j83agx80\"]').innerText;\n      var website = document.querySelector('span[class=\"d2edcug0 hpfvmrgz qv66sw1b c1et5uql oi732d6d ik7dh3pa fgxwclzu a8c37x1j keod5gw0 nxhoafnm aigsh9s9 d9wwppkn fe6kdd0r mau55g9w c8b282yb iv3no6db jq4qci2q a3bd9o3v knj5qynh oo9gr5id hzawbc8m\"] > a').innerText; //must be in the ' ....facebook.com..../about' page\n      //var category = document.querySelector('div[class=\"ii04i59q a3bd9o3v jq4qci2q oo9gr5id\"]').innerText;\n\n      return {\n        name,\n        followers,\n        website\n      };\n    });\n    console.log(facebookStats);\n  })();\n\n  res.status(200).json({\n    info: 'scrape page',\n    name: req.body.name\n  });\n});","map":{"version":3,"sources":["/Users/robertobrien/Documents/projects/ghost-scraper/pages/api/scrapePage.js"],"names":["Puppeteer","req","res","puppeteer","require","browser","launch","headless","page","newPage","goto","body","facebooklink","waitUntil","facebookStats","evaluate","fbType","document","querySelector","innerText","console","log","followers","name","website","status","json","info"],"mappings":"AAAA,SAASA,SAAT,QAA0B,WAA1B,C,CAGA;AACA;AACA;AACA;;AACA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAc;AAEzB,QAAMC,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AAEA,GAAC,YAAY;AACb,QAAIC,OAAO,GAAG,MAAMF,SAAS,CAACG,MAAV,CAAiB;AAACC,MAAAA,QAAQ,EAAE;AAAX,KAAjB,CAApB;AACA,QAAIC,IAAI,GAAG,MAAMH,OAAO,CAACI,OAAR,EAAjB,CAFa,CAGb;;AACA,UAAMD,IAAI,CAACE,IAAL,CAAUT,GAAG,CAACU,IAAJ,CAASC,YAAnB,EAAiC;AAACC,MAAAA,SAAS,EAAE;AAAZ,KAAjC,CAAN;AAEA,QAAIC,aAAa,GAAG,MAAMN,IAAI,CAACO,QAAL,CAAc,MAAM;AAE1C,UAAIC,MAAJ;AACA,UAAIC,QAAQ,CAACC,aAAT,CAAuB,wDAAvB,EAAiFC,SAArF,EACIH,MAAM,GAAG,MAAT,CADJ,KAGIA,MAAM,GAAG,SAAT;AAEJI,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAcL,MAA1B;AACA,UAAIM,SAAS,GAAGL,QAAQ,CAACC,aAAT,CAAuB,4MAAvB,EAAqOC,SAArP;AAEA,UAAII,IAAI,GAAGN,QAAQ,CAACC,aAAT,CAAuB,mEAAvB,EAA4FC,SAAvG;AACA,UAAIK,OAAO,GAAGP,QAAQ,CAACC,aAAT,CAAuB,gNAAvB,EAAyOC,SAAvP,CAZ0C,CAa1C;AACA;;AAEA,aAAO;AACHI,QAAAA,IADG;AAEHD,QAAAA,SAFG;AAGHE,QAAAA;AAHG,OAAP;AAKH,KArByB,CAA1B;AAuBAJ,IAAAA,OAAO,CAACC,GAAR,CAAYP,aAAZ;AAEC,GA/BD;;AAoCAZ,EAAAA,GAAG,CAACuB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,IAAI,EAAE,aAAR;AAAuBJ,IAAAA,IAAI,EAAEtB,GAAG,CAACU,IAAJ,CAASY;AAAtC,GAArB;AACD,CAzCH","sourcesContent":["import { Puppeteer } from \"puppeteer\"\n\n\n// This is the script\n// based on req.body, call some api to get a webpage\n// scrap page\n// return json here\nexport default (req, res) => {\n\n    const puppeteer = require(\"puppeteer\");\n\n    (async () => { \n    var browser = await puppeteer.launch({headless: true});\n    var page = await browser.newPage(); \n    //gos to the facebook link\n    await page.goto(req.body.facebooklink, {waitUntil: 'networkidle2'});\n\n    let facebookStats = await page.evaluate(() => {\n\n        var fbType\n        if( document.querySelector('button[class=\"_4jy0 _4jy3 _4jy2 _51sy selected _42ft\"]').innerText )\n            fbType = 'page';\n        else \n            fbType = 'profile';\n\n        console.log(\"fb type: \" + fbType);\n        var followers = document.querySelector('span[class=\"d2edcug0 hpfvmrgz qv66sw1b c1et5uql oi732d6d ik7dh3pa fgxwclzu a8c37x1j keod5gw0 nxhoafnm aigsh9s9 d9wwppkn fe6kdd0r mau55g9w c8b282yb iv3no6db jq4qci2q a3bd9o3v knj5qynh oo9gr5id hzawbc8m\"]').innerText\n\n        var name = document.querySelector('h1[class=\"gmql0nx0 l94mrbxd p1ri9a11 lzcic4wl bp9cbjyn j83agx80\"]').innerText;\n        var website = document.querySelector('span[class=\"d2edcug0 hpfvmrgz qv66sw1b c1et5uql oi732d6d ik7dh3pa fgxwclzu a8c37x1j keod5gw0 nxhoafnm aigsh9s9 d9wwppkn fe6kdd0r mau55g9w c8b282yb iv3no6db jq4qci2q a3bd9o3v knj5qynh oo9gr5id hzawbc8m\"] > a').innerText;\n        //must be in the ' ....facebook.com..../about' page\n        //var category = document.querySelector('div[class=\"ii04i59q a3bd9o3v jq4qci2q oo9gr5id\"]').innerText;\n\n        return {\n            name,\n            followers,\n            website,\n        }\n    })\n\n    console.log(facebookStats);\n\n    })();\n\n\n    \n\n    res.status(200).json({ info: 'scrape page', name: req.body.name })\n  }\n  "]},"metadata":{},"sourceType":"module"}