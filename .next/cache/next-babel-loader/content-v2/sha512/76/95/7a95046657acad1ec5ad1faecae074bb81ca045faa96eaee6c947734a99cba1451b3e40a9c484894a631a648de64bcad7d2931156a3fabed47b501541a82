{"ast":null,"code":"const puppeteer = require(\"puppeteer\"); //import { Puppeteer } from \"puppeteer\"\n\n\nexport default ((req, res) => {\n  (async () => {\n    var browser = await puppeteer.launch({\n      headless: false\n    });\n    var page = await browser.newPage(); //goes to the youtube link (routed to about page)\n\n    if (req.body.youtubelink) {\n      const ytAboutLink = req.body.youtubelink + '/about';\n      await page.goto(ytAboutLink, {\n        waitUntil: 'networkidle2'\n      });\n      let youtubeStats = await page.evaluate(() => {\n        console.log(document.querySelector('#channel-name').innerText);\n        var name = document.querySelector('#channel-name').innerText;\n        var description = document.querySelector('#description').innerText; //var rightColumn = document.querySelectorAll('#right-column > yt-formatted-string')[2].innerText;\n\n        var views = '100,000';\n        var subscribers = document.querySelector('#subscriber-count').innerText;\n        var type = 'youtube';\n        var url = req.body.youtubelink;\n        return {\n          type,\n          url,\n          name,\n          description,\n          views,\n          subscribers\n        };\n      });\n      console.log(youtubeStats);\n    }\n    /* planning on how im gonna output this thing\n    obj = {facebookstats, instagramstats, youtubestats}\n    fs.writeFile(\"./\" + new Date().toString() + \".txt\", JSON.stringify(obj), function(err) {\n        if(err) {\n            return console.log(err);\n        }\n    \n        console.log(\"The file was saved!\");\n    }); \n    */\n\n\n    await browser.close();\n  })();\n\n  res.status(200).json({\n    info: 'scrape page',\n    name: req.body.name\n  });\n});","map":{"version":3,"sources":["/Users/robertobrien/Documents/projects/ghost-scraper/pages/api/scrapePage.js"],"names":["puppeteer","require","req","res","browser","launch","headless","page","newPage","body","youtubelink","ytAboutLink","goto","waitUntil","youtubeStats","evaluate","console","log","document","querySelector","innerText","name","description","views","subscribers","type","url","close","status","json","info"],"mappings":"AAAA,MAAMA,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB,C,CAEA;;;AACA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAc;AAEzB,GAAC,YAAY;AACb,QAAIC,OAAO,GAAG,MAAMJ,SAAS,CAACK,MAAV,CAAiB;AAACC,MAAAA,QAAQ,EAAE;AAAX,KAAjB,CAApB;AACA,QAAIC,IAAI,GAAG,MAAMH,OAAO,CAACI,OAAR,EAAjB,CAFa,CAIb;;AACA,QAAGN,GAAG,CAACO,IAAJ,CAASC,WAAZ,EACA;AACI,YAAMC,WAAW,GAAGT,GAAG,CAACO,IAAJ,CAASC,WAAT,GAAuB,QAA3C;AACA,YAAMH,IAAI,CAACK,IAAL,CAAUD,WAAV,EAAuB;AAACE,QAAAA,SAAS,EAAE;AAAZ,OAAvB,CAAN;AAEA,UAAIC,YAAY,GAAG,MAAMP,IAAI,CAACQ,QAAL,CAAc,MAAM;AAEzCC,QAAAA,OAAO,CAACC,GAAR,CAAYC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,EAAwCC,SAApD;AAEA,YAAIC,IAAI,GAAGH,QAAQ,CAACC,aAAT,CAAuB,eAAvB,EAAwCC,SAAnD;AACA,YAAIE,WAAW,GAAGJ,QAAQ,CAACC,aAAT,CAAuB,cAAvB,EAAuCC,SAAzD,CALyC,CAMzC;;AACA,YAAIG,KAAK,GAAG,SAAZ;AACA,YAAIC,WAAW,GAAGN,QAAQ,CAACC,aAAT,CAAuB,mBAAvB,EAA4CC,SAA9D;AAGA,YAAIK,IAAI,GAAG,SAAX;AACA,YAAIC,GAAG,GAAGxB,GAAG,CAACO,IAAJ,CAASC,WAAnB;AAEA,eAAO;AACHe,UAAAA,IADG;AAEHC,UAAAA,GAFG;AAGHL,UAAAA,IAHG;AAIHC,UAAAA,WAJG;AAKHC,UAAAA,KALG;AAMHC,UAAAA;AANG,SAAP;AAQH,OAtBwB,CAAzB;AAwBAR,MAAAA,OAAO,CAACC,GAAR,CAAYH,YAAZ;AACH;AAID;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEI,UAAMV,OAAO,CAACuB,KAAR,EAAN;AAEC,GApDD;;AAuDAxB,EAAAA,GAAG,CAACyB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,IAAI,EAAE,aAAR;AAAuBT,IAAAA,IAAI,EAAEnB,GAAG,CAACO,IAAJ,CAASY;AAAtC,GAArB;AACD,CA1DH","sourcesContent":["const puppeteer = require(\"puppeteer\");\n\n//import { Puppeteer } from \"puppeteer\"\nexport default (req, res) => {\n\n    (async () => { \n    var browser = await puppeteer.launch({headless: false});\n    var page = await browser.newPage(); \n\n    //goes to the youtube link (routed to about page)\n    if(req.body.youtubelink)\n    {\n        const ytAboutLink = req.body.youtubelink + '/about';\n        await page.goto(ytAboutLink, {waitUntil: 'networkidle2'});\n        \n        let youtubeStats = await page.evaluate(() => {\n\n            console.log(document.querySelector('#channel-name').innerText);\n\n            var name = document.querySelector('#channel-name').innerText;\n            var description = document.querySelector('#description').innerText;\n            //var rightColumn = document.querySelectorAll('#right-column > yt-formatted-string')[2].innerText;\n            var views = '100,000';\n            var subscribers = document.querySelector('#subscriber-count').innerText;\n\n\n            var type = 'youtube';\n            var url = req.body.youtubelink;\n\n            return {\n                type,\n                url,\n                name,\n                description,\n                views,\n                subscribers,\n            }\n        })\n\n        console.log(youtubeStats);\n    }\n\n    \n\n    /* planning on how im gonna output this thing\n    obj = {facebookstats, instagramstats, youtubestats}\n    fs.writeFile(\"./\" + new Date().toString() + \".txt\", JSON.stringify(obj), function(err) {\n        if(err) {\n            return console.log(err);\n        }\n    \n        console.log(\"The file was saved!\");\n    }); \n    */\n\n    await browser.close();\n\n    })();\n\n\n    res.status(200).json({ info: 'scrape page', name: req.body.name })\n  }\n  "]},"metadata":{},"sourceType":"module"}