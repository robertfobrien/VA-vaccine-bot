{"ast":null,"code":"import next from \"next\";\n\nconst puppeteer = require(\"puppeteer\");\n\nconst ig = require('instagram-scraping');\n\nexport default ((req, res) => {\n  (async () => {\n    console.log('############################### LETS GET YOU A VACCINE! #########################################');\n    req.body.cvslink;\n    req.body.zipcode;\n    let browser = await puppeteer.launch({\n      headless: false,\n      args: ['--window-size=1920,1080']\n    }); //turn to FALSE to debug\n\n    let page = await browser.newPage();\n    await page.goto('https://www.cvs.com/vaccine/intake/store/covid-screener/covid-qns', {\n      waitUntil: 'networkidle0'\n    });\n    await page.waitForSelector('#q7_2');\n    window.scroll(200);\n    await page.click('#q7_2');\n    await page.click('#q8_2');\n    await page.click('#q9_2'); //await browser.close();\n  })();\n\n  res.status(200).json({\n    info: 'scrape page',\n    name: req.body.name\n  });\n});","map":{"version":3,"sources":["/Users/robertobrien/Documents/projects/vaccine-signup/pages/api/scrapePage.js"],"names":["next","puppeteer","require","ig","req","res","console","log","body","cvslink","zipcode","browser","launch","headless","args","page","newPage","goto","waitUntil","waitForSelector","window","scroll","click","status","json","info","name"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;;AAEA,MAAMC,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAMC,EAAE,GAAGD,OAAO,CAAC,oBAAD,CAAlB;;AAEA,gBAAe,CAACE,GAAD,EAAMC,GAAN,KAAc;AAGzB,GAAC,YAAY;AAETC,IAAAA,OAAO,CAACC,GAAR,CAAY,mGAAZ;AAEAH,IAAAA,GAAG,CAACI,IAAJ,CAASC,OAAT;AACAL,IAAAA,GAAG,CAACI,IAAJ,CAASE,OAAT;AACA,QAAIC,OAAO,GAAG,MAAMV,SAAS,CAACW,MAAV,CAAiB;AAACC,MAAAA,QAAQ,EAAE,KAAX;AAAkBC,MAAAA,IAAI,EAAE,CAAC,yBAAD;AAAxB,KAAjB,CAApB,CANS,CAMmF;;AAC5F,QAAIC,IAAI,GAAG,MAAMJ,OAAO,CAACK,OAAR,EAAjB;AAEA,UAAMD,IAAI,CAACE,IAAL,CAAU,mEAAV,EAA+E;AAACC,MAAAA,SAAS,EAAE;AAAZ,KAA/E,CAAN;AAEA,UAAMH,IAAI,CAACI,eAAL,CAAqB,OAArB,CAAN;AACAC,IAAAA,MAAM,CAACC,MAAP,CAAc,GAAd;AAEA,UAAMN,IAAI,CAACO,KAAL,CAAW,OAAX,CAAN;AACA,UAAMP,IAAI,CAACO,KAAL,CAAW,OAAX,CAAN;AACA,UAAMP,IAAI,CAACO,KAAL,CAAW,OAAX,CAAN,CAhBS,CAoBT;AACC,GArBL;;AAwBAjB,EAAAA,GAAG,CAACkB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,IAAI,EAAE,aAAR;AAAuBC,IAAAA,IAAI,EAAEtB,GAAG,CAACI,IAAJ,CAASkB;AAAtC,GAArB;AACD,CA5BH","sourcesContent":["import next from \"next\";\n\nconst puppeteer = require(\"puppeteer\");\nconst ig = require('instagram-scraping');\n\nexport default (req, res) => {\n\n\n    (async () => { \n\n        console.log('############################### LETS GET YOU A VACCINE! #########################################');\n\n        req.body.cvslink;\n        req.body.zipcode;\n        let browser = await puppeteer.launch({headless: false, args: ['--window-size=1920,1080']}); //turn to FALSE to debug\n        let page = await browser.newPage(); \n\n        await page.goto('https://www.cvs.com/vaccine/intake/store/covid-screener/covid-qns', {waitUntil: 'networkidle0'});\n\n        await page.waitForSelector('#q7_2');\n        window.scroll(200);\n            \n        await page.click('#q7_2');\n        await page.click('#q8_2');\n        await page.click('#q9_2');\n\n\n    \n        //await browser.close();\n        })();\n\n\n    res.status(200).json({ info: 'scrape page', name: req.body.name })\n  }\n  "]},"metadata":{},"sourceType":"module"}