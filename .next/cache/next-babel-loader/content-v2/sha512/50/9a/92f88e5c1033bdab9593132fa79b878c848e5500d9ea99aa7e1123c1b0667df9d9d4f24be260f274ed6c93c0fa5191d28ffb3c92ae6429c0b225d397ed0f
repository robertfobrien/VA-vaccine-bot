{"ast":null,"code":"import { Puppeteer } from \"puppeteer\"; // This is the script\n// based on req.body, call some api to get a webpage\n// scrap page\n// return json here\n\nexport default ((req, res) => {\n  const puppeteer = require(\"puppeteer\");\n\n  (async () => {\n    var browser = await puppeteer.launch({\n      headless: false\n    });\n    var page = await browser.newPage(); //gos to the facebook link\n\n    await page.goto(req.body.facebooklink); //makes sure the page is rendered correctly (by checking on the name)\n\n    console.log(1);\n    await page.waitForSelector('h1.gmql0nx0 l94mrbxd p1ri9a11 lzcic4wl bp9cbjyn j83agx80');\n    console.log(2);\n    var facebookData = await page.evaluate(() => {\n      const name = document.querySelectorAll('h1.gmql0nx0 l94mrbxd p1ri9a11 lzcic4wl bp9cbjyn j83agx80');\n      const fbFollowers = document.querySelectorAll('span.d2edcug0 hpfvmrgz qv66sw1b c1et5uql oi732d6d ik7dh3pa fgxwclzu a8c37x1j keod5gw0 nxhoafnm aigsh9s9 d9wwppkn fe6kdd0r mau55g9w c8b282yb iv3no6db jq4qci2q a3bd9o3v knj5qynh oo9gr5id hzawbc8m');\n    });\n    console.log(facebookData);\n    await browser.close();\n  })();\n\n  res.status(200).json({\n    info: 'scrape page',\n    name: req.body.name\n  });\n});","map":{"version":3,"sources":["/Users/robertobrien/Documents/projects/ghost-scraper/pages/api/scrapePage.js"],"names":["Puppeteer","req","res","puppeteer","require","browser","launch","headless","page","newPage","goto","body","facebooklink","console","log","waitForSelector","facebookData","evaluate","name","document","querySelectorAll","fbFollowers","close","status","json","info"],"mappings":"AAAA,SAASA,SAAT,QAA0B,WAA1B,C,CAGA;AACA;AACA;AACA;;AACA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAc;AAEzB,QAAMC,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AAEA,GAAC,YAAY;AACb,QAAIC,OAAO,GAAG,MAAMF,SAAS,CAACG,MAAV,CAAiB;AAACC,MAAAA,QAAQ,EAAE;AAAX,KAAjB,CAApB;AACA,QAAIC,IAAI,GAAG,MAAMH,OAAO,CAACI,OAAR,EAAjB,CAFa,CAGb;;AACA,UAAMD,IAAI,CAACE,IAAL,CAAUT,GAAG,CAACU,IAAJ,CAASC,YAAnB,CAAN,CAJa,CAKb;;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ;AACA,UAAMN,IAAI,CAACO,eAAL,CAAqB,0DAArB,CAAN;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ;AACA,QAAIE,YAAY,GAAG,MAAMR,IAAI,CAACS,QAAL,CAAc,MAAM;AACzC,YAAMC,IAAI,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,0DAA1B,CAAb;AACA,YAAMC,WAAW,GAAGF,QAAQ,CAACC,gBAAT,CAA0B,mMAA1B,CAApB;AACD,KAHsB,CAAzB;AAKEP,IAAAA,OAAO,CAACC,GAAR,CAAYE,YAAZ;AAGF,UAAMX,OAAO,CAACiB,KAAR,EAAN;AAEC,GAnBD;;AAsBApB,EAAAA,GAAG,CAACqB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,IAAI,EAAE,aAAR;AAAuBP,IAAAA,IAAI,EAAEjB,GAAG,CAACU,IAAJ,CAASO;AAAtC,GAArB;AACD,CA3BH","sourcesContent":["import { Puppeteer } from \"puppeteer\"\n\n\n// This is the script\n// based on req.body, call some api to get a webpage\n// scrap page\n// return json here\nexport default (req, res) => {\n\n    const puppeteer = require(\"puppeteer\");\n\n    (async () => { \n    var browser = await puppeteer.launch({headless: false});\n    var page = await browser.newPage(); \n    //gos to the facebook link\n    await page.goto(req.body.facebooklink);\n    //makes sure the page is rendered correctly (by checking on the name)\n    console.log(1)\n    await page.waitForSelector('h1.gmql0nx0 l94mrbxd p1ri9a11 lzcic4wl bp9cbjyn j83agx80');\n    console.log(2)\n    var facebookData = await page.evaluate(() => {\n        const name = document.querySelectorAll('h1.gmql0nx0 l94mrbxd p1ri9a11 lzcic4wl bp9cbjyn j83agx80')\n        const fbFollowers = document.querySelectorAll('span.d2edcug0 hpfvmrgz qv66sw1b c1et5uql oi732d6d ik7dh3pa fgxwclzu a8c37x1j keod5gw0 nxhoafnm aigsh9s9 d9wwppkn fe6kdd0r mau55g9w c8b282yb iv3no6db jq4qci2q a3bd9o3v knj5qynh oo9gr5id hzawbc8m');\n      });\n\n      console.log(facebookData)\n\n    \n    await browser.close();\n\n    })();\n\n\n    res.status(200).json({ info: 'scrape page', name: req.body.name })\n  }\n  "]},"metadata":{},"sourceType":"module"}