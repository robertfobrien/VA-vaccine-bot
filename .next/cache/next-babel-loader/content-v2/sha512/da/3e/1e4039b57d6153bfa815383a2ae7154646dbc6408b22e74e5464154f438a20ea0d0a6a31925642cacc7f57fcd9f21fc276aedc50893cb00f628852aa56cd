{"ast":null,"code":"import next from \"next\";\n\nconst puppeteer = require(\"puppeteer\");\n\nconst ig = require('instagram-scraping');\n\nexport default ((req, res) => {\n  (async () => {\n    const browser = await puppeteer.launch();\n    const page = await browser.newPage();\n    await page.goto('https://www.cvs.com/vaccine/intake/store/covid-screener/covid-qns');\n    await page.setViewport({\n      width: 1440,\n      height: 462\n    });\n    await page.waitForSelector('.form-group:nth-child(3) > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > label');\n    await page.click('.form-group:nth-child(3) > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > label');\n    await page.waitForSelector('.form-group:nth-child(3) > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > label');\n    await page.click('.form-group:nth-child(3) > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > label');\n    await page.waitForSelector('.form-group:nth-child(4) > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > .has-error-radio');\n    await page.click('.form-group:nth-child(4) > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > .has-error-radio');\n    await page.waitForSelector('.form-group > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > .has-error-radio');\n    await page.click('.form-group > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > .has-error-radio');\n    await page.waitForSelector('.imz-bg > cvs-covid-questionnaire > #content > .footer-content-wrapper > .btn-control');\n    await page.click('.imz-bg > cvs-covid-questionnaire > #content > .footer-content-wrapper > .btn-control');\n    await page.waitForSelector('.form-group > .row > .radio-btn-wrapper > .radioBtn-control:nth-child(1) > label');\n    await page.click('.form-group > .row > .radio-btn-wrapper > .radioBtn-control:nth-child(1) > label');\n    await page.waitForSelector('.imz-bg > cvs-covid-dose-selection > #content > .footer-content-wrapper > .btn-control');\n    await page.click('.imz-bg > cvs-covid-dose-selection > #content > .footer-content-wrapper > .btn-control');\n    await page.waitForSelector('#generic #jurisdiction');\n    await page.click('#generic #jurisdiction');\n    await page.select('#generic #jurisdiction', '42: EID_VA');\n    await page.waitForSelector('.imz-bg > cvs-eligibility-covid > #content > .footer-content-wrapper > .btn-control');\n    await page.click('.imz-bg > cvs-eligibility-covid > #content > .footer-content-wrapper > .btn-control');\n    await page.waitForSelector('fieldset #q1_0');\n    await page.click('fieldset #q1_0');\n    await page.waitForSelector('.form-group > .radio-btn-wrapper > .radio-btn-wrapper > .radioBtn-control:nth-child(3) > label');\n    await page.click('.form-group > .radio-btn-wrapper > .radio-btn-wrapper > .radioBtn-control:nth-child(3) > label');\n    await page.waitForSelector('.form-group > .radio-btn-wrapper > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > label');\n    await page.click('.form-group > .radio-btn-wrapper > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > label');\n    await page.waitForSelector('fieldset #consentText');\n    await page.click('fieldset #consentText');\n    await page.waitForSelector('.imz-bg > cvs-eligibility-questionnaire > #content > .footer-content-wrapper > .btn-control');\n    await page.click('.imz-bg > cvs-eligibility-questionnaire > #content > .footer-content-wrapper > .btn-control');\n    await page.waitForSelector('.imz-bg > cvs-cvd-how-to-schedule > #content > .footer-content-wrapper > .btn-control');\n    await page.click('.imz-bg > cvs-cvd-how-to-schedule > #content > .footer-content-wrapper > .btn-control');\n    await page.waitForSelector('#generic #address');\n    await page.click('#generic #address');\n    await page.waitForSelector('.form-group > .row > .flex-container > .search-icon > img');\n    await page.click('.form-group > .row > .flex-container > .search-icon > img');\n    await browser.close();\n  })();\n\n  res.status(200).json({\n    info: 'scrape page',\n    name: req.body.name\n  });\n});","map":{"version":3,"sources":["/Users/robertobrien/Documents/projects/vaccine-signup/pages/api/scrapePage.js"],"names":["next","puppeteer","require","ig","req","res","browser","launch","page","newPage","goto","setViewport","width","height","waitForSelector","click","select","close","status","json","info","name","body"],"mappings":"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","sourcesContent":["import next from \"next\";\n\nconst puppeteer = require(\"puppeteer\");\nconst ig = require('instagram-scraping');\n\nexport default (req, res) => {\n\n\n    (async () => { \n\n        const browser = await puppeteer.launch()\n        const page = await browser.newPage()\n        \n        await page.goto('https://www.cvs.com/vaccine/intake/store/covid-screener/covid-qns')\n        \n        await page.setViewport({ width: 1440, height: 462 })\n        \n        await page.waitForSelector('.form-group:nth-child(3) > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > label')\n        await page.click('.form-group:nth-child(3) > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > label')\n        \n        await page.waitForSelector('.form-group:nth-child(3) > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > label')\n        await page.click('.form-group:nth-child(3) > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > label')\n        \n        await page.waitForSelector('.form-group:nth-child(4) > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > .has-error-radio')\n        await page.click('.form-group:nth-child(4) > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > .has-error-radio')\n        \n        await page.waitForSelector('.form-group > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > .has-error-radio')\n        await page.click('.form-group > fieldset > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > .has-error-radio')\n        \n        await page.waitForSelector('.imz-bg > cvs-covid-questionnaire > #content > .footer-content-wrapper > .btn-control')\n        await page.click('.imz-bg > cvs-covid-questionnaire > #content > .footer-content-wrapper > .btn-control')\n        \n        await page.waitForSelector('.form-group > .row > .radio-btn-wrapper > .radioBtn-control:nth-child(1) > label')\n        await page.click('.form-group > .row > .radio-btn-wrapper > .radioBtn-control:nth-child(1) > label')\n        \n        await page.waitForSelector('.imz-bg > cvs-covid-dose-selection > #content > .footer-content-wrapper > .btn-control')\n        await page.click('.imz-bg > cvs-covid-dose-selection > #content > .footer-content-wrapper > .btn-control')\n        \n        await page.waitForSelector('#generic #jurisdiction')\n        await page.click('#generic #jurisdiction')\n        \n        await page.select('#generic #jurisdiction', '42: EID_VA')\n        \n        await page.waitForSelector('.imz-bg > cvs-eligibility-covid > #content > .footer-content-wrapper > .btn-control')\n        await page.click('.imz-bg > cvs-eligibility-covid > #content > .footer-content-wrapper > .btn-control')\n        \n        await page.waitForSelector('fieldset #q1_0')\n        await page.click('fieldset #q1_0')\n        \n        await page.waitForSelector('.form-group > .radio-btn-wrapper > .radio-btn-wrapper > .radioBtn-control:nth-child(3) > label')\n        await page.click('.form-group > .radio-btn-wrapper > .radio-btn-wrapper > .radioBtn-control:nth-child(3) > label')\n        \n        await page.waitForSelector('.form-group > .radio-btn-wrapper > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > label')\n        await page.click('.form-group > .radio-btn-wrapper > .radio-btn-wrapper > .radioBtn-control:nth-child(2) > label')\n        \n        await page.waitForSelector('fieldset #consentText')\n        await page.click('fieldset #consentText')\n        \n        await page.waitForSelector('.imz-bg > cvs-eligibility-questionnaire > #content > .footer-content-wrapper > .btn-control')\n        await page.click('.imz-bg > cvs-eligibility-questionnaire > #content > .footer-content-wrapper > .btn-control')\n        \n        await page.waitForSelector('.imz-bg > cvs-cvd-how-to-schedule > #content > .footer-content-wrapper > .btn-control')\n        await page.click('.imz-bg > cvs-cvd-how-to-schedule > #content > .footer-content-wrapper > .btn-control')\n        \n        await page.waitForSelector('#generic #address')\n        await page.click('#generic #address')\n        \n        await page.waitForSelector('.form-group > .row > .flex-container > .search-icon > img')\n        await page.click('.form-group > .row > .flex-container > .search-icon > img')\n        \n        await browser.close()\n        })();\n\n\n    res.status(200).json({ info: 'scrape page', name: req.body.name })\n  }\n  "]},"metadata":{},"sourceType":"module"}